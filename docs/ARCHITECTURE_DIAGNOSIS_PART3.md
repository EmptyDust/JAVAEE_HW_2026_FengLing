# å¾®æœåŠ¡æ¶æ„è¯Šæ–­æŠ¥å‘Šï¼šæ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼ˆç¬¬ä¸‰éƒ¨åˆ†ï¼‰

## ğŸ¯ é—®é¢˜5ï¼šæ•°æ®ä¸€è‡´æ€§é£é™©çš„è§£å†³æ–¹æ¡ˆ

### 5.1 "åƒµå°¸è´¦å·" é—®é¢˜çš„æ ¹æœ¬åŸå› 

**é—®é¢˜å›é¡¾**ï¼š
```java
// TeacherInfoService.java:100-141
@Transactional(rollbackFor = Exception.class)
public TeacherInfo addTeacher(TeacherInfo teacher) {
    userMapper.insert(user);              // æ­¥éª¤1ï¼šåˆ›å»ºUser
    teacher.setUserId(user.getId());
    teacherInfoMapper.insert(teacher);    // æ­¥éª¤2ï¼šåˆ›å»ºTeacherInfo
}
```

**å¤±è´¥åœºæ™¯**ï¼š
- æ­¥éª¤1æˆåŠŸï¼Œæ­¥éª¤2å¤±è´¥ â†’ Userå·²åˆ›å»ºï¼ŒTeacherInfoæœªåˆ›å»º â†’ åƒµå°¸è´¦å·

---

### 5.2 ä»Šæ™šåº”æ€¥æ–¹æ¡ˆï¼šè¡¥å¿äº‹åŠ¡

#### æ–¹æ¡ˆï¼šTry-Catch + æ‰‹åŠ¨å›æ»š

```java
// TeacherInfoService.java - ä¿®æ”¹ addTeacher æ–¹æ³•
@Transactional(rollbackFor = Exception.class)
public TeacherInfo addTeacher(TeacherInfo teacher) {
    // æ£€æŸ¥å·¥å·æ˜¯å¦å·²å­˜åœ¨
    LambdaQueryWrapper<TeacherInfo> wrapper = new LambdaQueryWrapper<>();
    wrapper.eq(TeacherInfo::getTeacherNo, teacher.getTeacherNo());
    if (teacherInfoMapper.selectCount(wrapper) > 0) {
        throw new BusinessException("æ•™å¸ˆå·¥å·å·²å­˜åœ¨");
    }

    // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
    LambdaQueryWrapper<User> userWrapper = new LambdaQueryWrapper<>();
    userWrapper.eq(User::getUsername, teacher.getTeacherNo());
    if (userMapper.selectCount(userWrapper) > 0) {
        throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨ï¼Œæ— æ³•åˆ›å»ºè´¦å·");
    }

    User user = null;
    try {
        // 1. åˆ›å»ºç”¨æˆ·è´¦å·
        user = new User();
        user.setUsername(teacher.getTeacherNo());
        user.setPassword(PasswordUtils.encode("123456"));
        user.setUserType("teacher");
        user.setEmail(teacher.getEmail());
        user.setPhone(teacher.getPhone());
        userMapper.insert(user);

        // 2. è®¾ç½®æ•™å¸ˆä¿¡æ¯çš„user_idå’Œteacher_id
        teacher.setUserId(user.getId());
        if (teacher.getStatus() == null) {
            teacher.setStatus(1);
        }

        // 3. æ’å…¥æ•™å¸ˆä¿¡æ¯
        teacherInfoMapper.insert(teacher);

        // 4. å›å†™ teacher_id åˆ° User è¡¨
        user.setTeacherId(teacher.getId());
        userMapper.updateById(user);

        log.info("æ·»åŠ æ•™å¸ˆæˆåŠŸ: teacherNo={}, userId={}, teacherId={}",
                teacher.getTeacherNo(), user.getId(), teacher.getId());
        return teacher;

    } catch (Exception e) {
        // è¡¥å¿äº‹åŠ¡ï¼šå¦‚æœå¤±è´¥ï¼Œåˆ é™¤å·²åˆ›å»ºçš„User
        if (user != null && user.getId() != null) {
            try {
                userMapper.deleteById(user.getId());
                log.warn("åˆ›å»ºæ•™å¸ˆå¤±è´¥ï¼Œå·²å›æ»šUserè®°å½•: userId={}", user.getId());
            } catch (Exception rollbackEx) {
                log.error("å›æ»šUserè®°å½•å¤±è´¥: userId={}", user.getId(), rollbackEx);
            }
        }
        log.error("æ·»åŠ æ•™å¸ˆå¤±è´¥", e);
        throw new BusinessException("æ·»åŠ æ•™å¸ˆå¤±è´¥: " + e.getMessage());
    }
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç®€å•ç›´æ¥ï¼Œä»Šæ™šå¯ä»¥ç«‹å³å®ç°
- âœ… ä¸éœ€è¦å¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶
- âœ… å¯ä»¥æœ‰æ•ˆé˜²æ­¢åƒµå°¸è´¦å·

**ç¼ºç‚¹**ï¼š
- âš ï¸ è¡¥å¿é€»è¾‘å¯èƒ½å¤±è´¥
- âš ï¸ ä»£ç å¤æ‚åº¦å¢åŠ 

---

### 5.3 åˆ é™¤æ•™å¸ˆçš„æ•°æ®ä¸€è‡´æ€§ä¿®å¤

```java
// TeacherInfoService.java - ä¿®æ”¹ deleteTeacher æ–¹æ³•
@Transactional(rollbackFor = Exception.class)
public void deleteTeacher(Long id) {
    TeacherInfo teacher = teacherInfoMapper.selectById(id);
    if (teacher == null) {
        throw new BusinessException("æ•™å¸ˆä¸å­˜åœ¨");
    }

    // æ£€æŸ¥æ˜¯å¦æœ‰å…³è”çš„è¯¾ç¨‹
    LambdaQueryWrapper<CourseInfo> wrapper = new LambdaQueryWrapper<>();
    wrapper.eq(CourseInfo::getTeacherId, id);
    Long courseCount = courseInfoMapper.selectCount(wrapper);
    if (courseCount > 0) {
        throw new BusinessException("è¯¥æ•™å¸ˆæœ‰å…³è”çš„è¯¾ç¨‹ï¼Œæ— æ³•åˆ é™¤");
    }

    // 1. é€»è¾‘åˆ é™¤æ•™å¸ˆä¿¡æ¯
    teacher.setStatus(0);
    teacherInfoMapper.updateById(teacher);

    // 2. åŒæ­¥ç¦ç”¨Userè´¦å·ï¼ˆæ–°å¢ï¼‰
    if (teacher.getUserId() != null) {
        User user = userMapper.selectById(teacher.getUserId());
        if (user != null) {
            // å¯ä»¥é€‰æ‹©ï¼šåˆ é™¤æˆ–ç¦ç”¨
            // æ–¹æ¡ˆAï¼šç‰©ç†åˆ é™¤
            // userMapper.deleteById(user.getId());

            // æ–¹æ¡ˆBï¼šé€»è¾‘åˆ é™¤ï¼ˆæ¨èï¼Œä¿ç•™å®¡è®¡æ—¥å¿—ï¼‰
            user.setStatus(0);  // éœ€è¦åœ¨Userè¡¨æ·»åŠ statuså­—æ®µ
            userMapper.updateById(user);
        }
    }

    log.info("åˆ é™¤æ•™å¸ˆæˆåŠŸ: id={}, teacherNo={}, userId={}",
            id, teacher.getTeacherNo(), teacher.getUserId());
}
```

---

### 5.4 é•¿æœŸæ–¹æ¡ˆï¼šå¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆæœªæ¥é‡æ„æ—¶è€ƒè™‘ï¼‰

**ä½¿ç”¨ Seata æ¡†æ¶**ï¼š
```java
@GlobalTransactional  // Seata å…¨å±€äº‹åŠ¡
public TeacherInfo addTeacher(TeacherInfo teacher) {
    // è·¨æœåŠ¡è°ƒç”¨ï¼Œè‡ªåŠ¨ä¿è¯ä¸€è‡´æ€§
    authServiceClient.createUser(user);
    teacherInfoMapper.insert(teacher);
}
```

**ä»Šæ™šä¸æ¨è**ï¼š
- âŒ éœ€è¦éƒ¨ç½² Seata Server
- âŒ éœ€è¦ä¿®æ”¹å¤§é‡é…ç½®
- âŒ å­¦ä¹ æˆæœ¬é«˜
- âŒ æ—¶é—´ä¸å¤Ÿ

---

## ğŸ“Š æœ€ç»ˆæ¶æ„å»ºè®®æ€»ç»“

### ä»Šæ™šå¿…é¡»å®Œæˆçš„æ”¹åŠ¨ï¼ˆP0ï¼‰

| ä»»åŠ¡ | æ—¶é—´ | é£é™© | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| 1. æ·»åŠ  teacher_id å­—æ®µåˆ° User è¡¨ | 5åˆ†é’Ÿ | ä½ | P0 |
| 2. ä¿®æ”¹ç™»å½•é€»è¾‘è¿”å› teacherId | 10åˆ†é’Ÿ | ä½ | P0 |
| 3. ä¿®æ”¹ Gateway æ³¨å…¥ teacherId | 10åˆ†é’Ÿ | ä½ | P0 |
| 4. æ·»åŠ æ•™å¸ˆè‡ªåŠ©æ¥å£ | 30åˆ†é’Ÿ | ä¸­ | P0 |
| 5. å®ç°æˆç»©æƒé™æ§åˆ¶ | 20åˆ†é’Ÿ | ä¸­ | P0 |

**æ€»è®¡ï¼š1å°æ—¶15åˆ†é’Ÿ**

### ä»Šæ™šå»ºè®®å®Œæˆçš„æ”¹åŠ¨ï¼ˆP1ï¼‰

| ä»»åŠ¡ | æ—¶é—´ | é£é™© | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| 6. é…ç½®æ•°æ®æƒé™è§„åˆ™ | 20åˆ†é’Ÿ | ä¸­ | P1 |
| 7. ä¿®æ”¹æ‹¦æˆªå™¨æ³¨å…¥ teacherId | 10åˆ†é’Ÿ | ä½ | P1 |
| 8. ä¿®å¤æ•°æ®ä¸€è‡´æ€§é—®é¢˜ | 30åˆ†é’Ÿ | ä¸­ | P1 |

**æ€»è®¡ï¼š1å°æ—¶**

### æœªæ¥éœ€è¦é‡æ„çš„å†…å®¹ï¼ˆæŠ€æœ¯å€ºåŠ¡ï¼‰

| ä»»åŠ¡ | æ—¶é—´ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|------|--------|------|
| æ‹†åˆ† teacher-service | 2-3å¤© | P2 | å½»åº•è§£å†³æ¶æ„é—®é¢˜ |
| å¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡ | 1-2å¤© | P2 | ä¿è¯æ•°æ®ä¸€è‡´æ€§ |
| ç»Ÿä¸€æœåŠ¡é—´è°ƒç”¨ | 1å¤© | P2 | ä½¿ç”¨ Feign å®¢æˆ·ç«¯ |

---

## ğŸ¯ æœ€ç¨³å¦¥çš„æƒé™æ‹¦æˆªå®ç°æ–¹æ¡ˆï¼ˆæ€»ç»“ï¼‰

### æ¨èæ–¹æ¡ˆï¼šä¸‰å±‚æƒé™æ§åˆ¶ + æ•°æ®æƒé™æ‹¦æˆª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ¨èçš„æƒé™æ§åˆ¶æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1. æ¥å£çº§æƒé™ï¼ˆ@RequireRoleï¼‰                                â”‚
â”‚     - æ§åˆ¶å“ªäº›è§’è‰²å¯ä»¥è®¿é—®æ¥å£                                â”‚
â”‚     - å®ç°ï¼šPermissionInterceptor                             â”‚
â”‚                                                               â”‚
â”‚  2. ä¸šåŠ¡çº§æƒé™ï¼ˆServiceå±‚æ ¡éªŒï¼‰                               â”‚
â”‚     - æ§åˆ¶ç”¨æˆ·åªèƒ½æ“ä½œè‡ªå·±çš„æ•°æ®                              â”‚
â”‚     - å®ç°ï¼šif (!teacherId.equals(...)) throw Exception       â”‚
â”‚                                                               â”‚
â”‚  3. æ•°æ®çº§æƒé™ï¼ˆMyBatisæ‹¦æˆªå™¨ï¼‰                               â”‚
â”‚     - è‡ªåŠ¨è¿‡æ»¤æŸ¥è¯¢ç»“æœ                                        â”‚
â”‚     - å®ç°ï¼šDataPermissionInterceptor                         â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…·ä½“å®ç°æ­¥éª¤

#### æ­¥éª¤1ï¼šé…ç½®æ¥å£çº§æƒé™

```java
// ç®¡ç†å‘˜ä¸“ç”¨
@RequireRole({"admin"})
@PostMapping("/teacher/add")

// æ•™å¸ˆå’Œç®¡ç†å‘˜
@RequireRole({"admin", "teacher"})
@PutMapping("/score/update")

// æ•™å¸ˆä¸“ç”¨
@RequireRole({"teacher"})
@GetMapping("/teacher/my-info")
```

#### æ­¥éª¤2ï¼šæ·»åŠ ä¸šåŠ¡çº§æƒé™

```java
public void updateScore(..., Long teacherId) {
    // æŸ¥è¯¢è¯¾ç¨‹
    CourseInfo course = courseInfoService.getCourseById(...);

    // æƒé™æ ¡éªŒ
    if (teacherId != null && !teacherId.equals(course.getTeacherId())) {
        throw new BusinessException("æ‚¨æ²¡æœ‰æƒé™ä¿®æ”¹è¯¥è¯¾ç¨‹çš„æˆç»©");
    }
}
```

#### æ­¥éª¤3ï¼šé…ç½®æ•°æ®çº§æƒé™

```sql
INSERT INTO data_permission_rule (...)
VALUES ('teacher', 'course_info', 'CourseInfo', 'teacher_id', '=', 'teacherId', 'SIMPLE', ...);
```

---

## âœ… ä»Šæ™šæ‰§è¡Œè®¡åˆ’ï¼ˆæœ€ç»ˆç‰ˆï¼‰

### æ—¶é—´çº¿ï¼ˆæ€»è®¡2å°æ—¶ï¼‰

**18:00-18:25ï¼ˆ25åˆ†é’Ÿï¼‰- ç´§æ€¥ä¿®å¤**
```bash
# 1. æ•°æ®åº“ä¿®æ”¹
mysql -uroot -proot123456 student_system < scripts/add_teacher_id.sql

# 2. ä¿®æ”¹ä»£ç 
- User.java æ·»åŠ  teacherId å­—æ®µ
- JwtUtil.java æ”¯æŒ teacherId
- AuthService.java è¿”å› teacherId
- Gateway AuthFilter æ³¨å…¥ teacherId
```

**18:25-18:55ï¼ˆ30åˆ†é’Ÿï¼‰- æ•™å¸ˆè‡ªåŠ©åŠŸèƒ½**
```bash
# 3. æ·»åŠ æ¥å£
- TeacherInfoController.getMyInfo()
- TeacherInfoController.updateMyInfo()

# 4. æµ‹è¯•
- æ•™å¸ˆç™»å½•
- æŸ¥çœ‹ä¸ªäººä¿¡æ¯
- ä¿®æ”¹ä¸ªäººä¿¡æ¯
```

**18:55-19:15ï¼ˆ20åˆ†é’Ÿï¼‰- æˆç»©æƒé™æ§åˆ¶**
```bash
# 5. ä¿®æ”¹ä»£ç 
- CourseEnrollmentService.updateScore() æ·»åŠ æƒé™æ ¡éªŒ
- CourseEnrollmentController.updateScore() ä¼ é€’ teacherId

# 6. æµ‹è¯•
- æ•™å¸ˆå½•å…¥è‡ªå·±è¯¾ç¨‹çš„æˆç»©ï¼ˆæˆåŠŸï¼‰
- æ•™å¸ˆå½•å…¥å…¶ä»–è¯¾ç¨‹çš„æˆç»©ï¼ˆå¤±è´¥ï¼‰
```

**19:15-20:15ï¼ˆ1å°æ—¶ï¼‰- æ•°æ®æƒé™æ‹¦æˆª**
```bash
# 7. é…ç½®æƒé™è§„åˆ™
mysql -uroot -proot123456 student_system < scripts/teacher_data_permission.sql

# 8. ä¿®æ”¹æ‹¦æˆªå™¨
- PermissionInterceptor æ³¨å…¥ teacherId
- UserContext æ·»åŠ  teacherId

# 9. å…¨é¢æµ‹è¯•
- æ•™å¸ˆæŸ¥è¯¢è¯¾ç¨‹åˆ—è¡¨ï¼ˆåªçœ‹åˆ°è‡ªå·±çš„ï¼‰
- æ•™å¸ˆæŸ¥è¯¢é€‰è¯¾å­¦ç”Ÿï¼ˆåªçœ‹åˆ°è‡ªå·±è¯¾ç¨‹çš„ï¼‰
- ç®¡ç†å‘˜æŸ¥è¯¢ï¼ˆçœ‹åˆ°æ‰€æœ‰ï¼‰
```

**20:15-20:30ï¼ˆ15åˆ†é’Ÿï¼‰- æ•°æ®ä¸€è‡´æ€§ä¿®å¤**
```bash
# 10. ä¿®æ”¹ä»£ç 
- TeacherInfoService.addTeacher() æ·»åŠ è¡¥å¿äº‹åŠ¡
- TeacherInfoService.deleteTeacher() åŒæ­¥ç¦ç”¨User

# 11. æµ‹è¯•
- åˆ›å»ºæ•™å¸ˆï¼ˆæˆåŠŸå’Œå¤±è´¥åœºæ™¯ï¼‰
- åˆ é™¤æ•™å¸ˆï¼ˆéªŒè¯Userä¹Ÿè¢«ç¦ç”¨ï¼‰
```

---

## ğŸš¨ é£é™©æ§åˆ¶å’Œå›æ»šæ–¹æ¡ˆ

### å¤‡ä»½ç­–ç•¥

```bash
# 1. å¤‡ä»½æ•°æ®åº“
mysqldump -uroot -proot123456 student_system > backup_$(date +%Y%m%d_%H%M%S).sql

# 2. å¤‡ä»½ä»£ç 
git add .
git commit -m "backup before architecture fix"
git tag backup-20260110
```

### å›æ»šæ–¹æ¡ˆ

**å¦‚æœå‡ºç°ä¸¥é‡é—®é¢˜**ï¼š
```bash
# 1. å›æ»šæ•°æ®åº“
mysql -uroot -proot123456 student_system < backup_20260110.sql

# 2. å›æ»šä»£ç 
git reset --hard backup-20260110

# 3. é‡å¯æœåŠ¡
./restart-all-services.sh
```

---

## ğŸ“‹ æœ€ç»ˆæ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•

- [ ] ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºæ•™å¸ˆ
- [ ] æ•™å¸ˆå¯ä»¥ç™»å½•ç³»ç»Ÿ
- [ ] æ•™å¸ˆå¯ä»¥æŸ¥çœ‹è‡ªå·±çš„ä¿¡æ¯
- [ ] æ•™å¸ˆå¯ä»¥ä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯ï¼ˆç”µè¯ã€é‚®ç®±ï¼‰
- [ ] æ•™å¸ˆä¸èƒ½ä¿®æ”¹æ•æ„Ÿä¿¡æ¯ï¼ˆå·¥å·ã€éƒ¨é—¨ï¼‰
- [ ] æ•™å¸ˆåªèƒ½çœ‹åˆ°è‡ªå·±çš„è¯¾ç¨‹åˆ—è¡¨
- [ ] æ•™å¸ˆåªèƒ½çœ‹åˆ°è‡ªå·±è¯¾ç¨‹çš„é€‰è¯¾å­¦ç”Ÿ
- [ ] æ•™å¸ˆåªèƒ½ä¿®æ”¹è‡ªå·±è¯¾ç¨‹çš„æˆç»©
- [ ] æ•™å¸ˆä¸èƒ½ä¿®æ”¹å…¶ä»–æ•™å¸ˆè¯¾ç¨‹çš„æˆç»©
- [ ] ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹ä»»ä½•æˆç»©
- [ ] ç®¡ç†å‘˜å¯ä»¥çœ‹åˆ°æ‰€æœ‰è¯¾ç¨‹å’Œå­¦ç”Ÿ

### æ•°æ®ä¸€è‡´æ€§æµ‹è¯•

- [ ] åˆ›å»ºæ•™å¸ˆæˆåŠŸï¼ŒUserå’ŒTeacherInfoéƒ½å­˜åœ¨
- [ ] åˆ›å»ºæ•™å¸ˆå¤±è´¥ï¼ŒUserå’ŒTeacherInfoéƒ½ä¸å­˜åœ¨
- [ ] åˆ é™¤æ•™å¸ˆåï¼ŒUserè´¦å·è¢«ç¦ç”¨
- [ ] å¹¶å‘åˆ›å»ºæ•™å¸ˆä¸ä¼šäº§ç”Ÿé‡å¤è´¦å·

### æ€§èƒ½æµ‹è¯•

- [ ] æ•™å¸ˆæŸ¥è¯¢è¯¾ç¨‹åˆ—è¡¨å“åº”æ—¶é—´ < 500ms
- [ ] æ•°æ®æƒé™æ‹¦æˆªä¸å½±å“æŸ¥è¯¢æ€§èƒ½
- [ ] å¹¶å‘å½•å…¥æˆç»©ä¸ä¼šå‡ºç°æ­»é”

---

## ğŸ“ ç»éªŒæ€»ç»“å’Œæœªæ¥å»ºè®®

### æœ¬æ¬¡é—®é¢˜çš„æ ¹æœ¬åŸå› 

1. **æ¶æ„è®¾è®¡ä¸ä¸€è‡´**
   - å­¦ç”Ÿæœ‰ç‹¬ç«‹æœåŠ¡ï¼Œæ•™å¸ˆå´æ··åœ¨è¯¾ç¨‹æœåŠ¡ä¸­
   - ç¼ºä¹ç»Ÿä¸€çš„è®¾è®¡åŸåˆ™

2. **æ•°æ®åº“è®¾è®¡ä¸å®Œæ•´**
   - Userè¡¨ç¼ºå°‘teacher_idå­—æ®µ
   - å¯¼è‡´æ— æ³•å»ºç«‹åŒå‘å…³è”

3. **æƒé™æ§åˆ¶ç¼ºå¤±**
   - åªè€ƒè™‘äº†ç®¡ç†å‘˜æƒé™
   - æ²¡æœ‰è€ƒè™‘æ•™å¸ˆè‡ªåŠ©åœºæ™¯

### æœªæ¥æ¶æ„æ”¹è¿›å»ºè®®

#### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

1. **å®Œå–„æƒé™æ§åˆ¶**
   - å®ç°å®Œæ•´çš„RBAC
   - æ·»åŠ æ›´ç»†ç²’åº¦çš„æƒé™è§„åˆ™

2. **ä¼˜åŒ–æ•°æ®æƒé™**
   - æ‰©å±•æ•°æ®æƒé™è§„åˆ™
   - æ”¯æŒæ›´å¤æ‚çš„æƒé™åœºæ™¯

3. **æ·»åŠ å®¡è®¡æ—¥å¿—**
   - è®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ
   - ä¾¿äºè¿½è¸ªå’Œæ’æŸ¥é—®é¢˜

#### ä¸­æœŸï¼ˆ1-2æœˆï¼‰

1. **æ‹†åˆ†teacher-service**
   - å½»åº•è§£å†³æ¶æ„é—®é¢˜
   - å®ç°æœåŠ¡èŒè´£æ¸…æ™°

2. **å¼•å…¥åˆ†å¸ƒå¼äº‹åŠ¡**
   - ä½¿ç”¨Seataä¿è¯ä¸€è‡´æ€§
   - é¿å…åƒµå°¸æ•°æ®

3. **ç»Ÿä¸€æœåŠ¡é—´è°ƒç”¨**
   - ä½¿ç”¨Feignå®¢æˆ·ç«¯
   - æ·»åŠ ç†”æ–­é™çº§

#### é•¿æœŸï¼ˆ3-6æœˆï¼‰

1. **å¼•å…¥APIç½‘å…³å¢å¼º**
   - ç»Ÿä¸€é‰´æƒ
   - é™æµç†”æ–­

2. **æ·»åŠ ç›‘æ§å‘Šè­¦**
   - æœåŠ¡ç›‘æ§
   - æ€§èƒ½ç›‘æ§
   - ä¸šåŠ¡ç›‘æ§

3. **å®Œå–„æµ‹è¯•ä½“ç³»**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - å‹åŠ›æµ‹è¯•

---

## ğŸ¯ æœ€ç»ˆå»ºè®®

### ä»Šæ™šçš„ç­–ç•¥

**ä¿å®ˆç­–ç•¥ï¼ˆæ¨èï¼‰**ï¼š
- âœ… åªæ‰§è¡ŒP0ä»»åŠ¡ï¼ˆ1å°æ—¶15åˆ†é’Ÿï¼‰
- âœ… ç¡®ä¿åŸºæœ¬åŠŸèƒ½å¯ç”¨
- âœ… ç•™å‡ºç¼“å†²æ—¶é—´å¤„ç†æ„å¤–

**æ¿€è¿›ç­–ç•¥ï¼ˆä¸æ¨èï¼‰**ï¼š
- âš ï¸ æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼ˆ2å°æ—¶30åˆ†é’Ÿï¼‰
- âš ï¸ æ—¶é—´ç´§å¼ ï¼Œå®¹æ˜“å‡ºé”™
- âš ï¸ æ²¡æœ‰ç¼“å†²æ—¶é—´

### æ˜å¤©çš„è®¡åˆ’

1. **è¡¥å……æµ‹è¯•**ï¼ˆ1å°æ—¶ï¼‰
   - å…¨é¢æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   - ä¿®å¤å‘ç°çš„é—®é¢˜

2. **æ€§èƒ½ä¼˜åŒ–**ï¼ˆ1å°æ—¶ï¼‰
   - ä¼˜åŒ–æ…¢æŸ¥è¯¢
   - æ·»åŠ ç¼“å­˜

3. **æ–‡æ¡£æ›´æ–°**ï¼ˆ30åˆ†é’Ÿï¼‰
   - æ›´æ–°APIæ–‡æ¡£
   - æ›´æ–°éƒ¨ç½²æ–‡æ¡£

---

**è¯Šæ–­æŠ¥å‘Šå®Œæˆ**

**å…³é”®ç»“è®º**ï¼š
1. å½“å‰æ¶æ„å­˜åœ¨ä¸¥é‡çš„èŒè´£è¾¹ç•Œæ··ä¹±é—®é¢˜
2. ä»Šæ™šå¯ä»¥é€šè¿‡"æ‰“è¡¥ä¸"æ–¹å¼ä¸´æ—¶è§£å†³
3. æœªæ¥éœ€è¦å½»åº•é‡æ„ï¼Œæ‹†åˆ†teacher-service
4. æ¨èä½¿ç”¨ä¸‰å±‚æƒé™æ§åˆ¶æ¶æ„
5. å¿…é¡»è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜

**æ—¶é—´è¯„ä¼°**ï¼š
- æœ€å°æ”¹åŠ¨ï¼š1å°æ—¶15åˆ†é’Ÿï¼ˆP0ä»»åŠ¡ï¼‰
- å®Œæ•´æ”¹åŠ¨ï¼š2å°æ—¶30åˆ†é’Ÿï¼ˆP0+P1ä»»åŠ¡ï¼‰
- æ¨èï¼šæ‰§è¡ŒP0ä»»åŠ¡ï¼Œç¡®ä¿ç¨³å®šæ€§

**é£é™©è¯„çº§**ï¼š
- P0ä»»åŠ¡ï¼šä½é£é™©ï¼Œå¯ä»¥æ”¾å¿ƒæ‰§è¡Œ
- P1ä»»åŠ¡ï¼šä¸­é£é™©ï¼Œå»ºè®®å……åˆ†æµ‹è¯•
- é‡æ„æ–¹æ¡ˆï¼šé«˜é£é™©ï¼Œä¸å»ºè®®ä»Šæ™šæ‰§è¡Œ
